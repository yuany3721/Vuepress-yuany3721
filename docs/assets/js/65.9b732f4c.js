(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{636:function(s,a,n){"use strict";n.r(a);var t=n(17),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器硬盘空间")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -h\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 类似于 lxd-pool/containers/container_name   36G   35G  1.9G")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在宿主机中查看zfs存储池信息")]),s._v("\nlxc storage list\nlxc storage info lxc-zfs-pool-name\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("如果是zfs空间不足，则扩容zfs：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" zpool "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoexpand")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on lxc-zfs-pool-name\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 扩容存储池文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果是apt安装，ZFS存储文件通常位于/var/lib/lxd/disks/default.img；如果是snap安装，则位于/var/snap/lxd/common/lxd/disks/default.img。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" truncate -s +20G /var/lib/lxd/disks/default.img\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启lxd")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" lxd restart "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt安装")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart snap.lxd.daemon "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# snap安装")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("如果是容器配额不足（zfs有空间，容器空间满了），修改容器配额：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器配额")]),s._v("\nzfs get "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v(" lxc-zfs-pool-name/containers/container-name\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加容器配额")]),s._v("\nzfs "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("quota")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("newsize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("例如80G"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" lxc-zfs-pool-name/containers/container-name\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("不需要重启容器，实时生效")])])}),[],!1,null,null,null);a.default=e.exports}}]);