(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{556:function(s,t,e){s.exports=e.p+"assets/img/nvsmi.53d0ecdf.png"},557:function(s,t,e){s.exports=e.p+"assets/img/connect2lxc.59cb63b3.png"},558:function(s,t){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAW8AAACMCAYAAACzmyiMAAAf+UlEQVR4nO2de5AcVdmHz+4mWRIuAgGkKG5aIRKJJgUKXkBA8IKgfhgRSsson0Gr1EAVGkupVECl/MNbiYBVCKKAIggUH1IqBkVCQA2CSAkECV64iFwMIMiSJXv5+jk972xv78z06dmeS+/8nqqpmek50+f0menfefs9p9+3b7vttht3oi6f+tSn3Pz58/3rl7/85e6AAw5wTz31lFu5cqV7/PHHO9w6IUSvMqvTDeh2li5d6vbbbz//+uGHH3Z33nmn+9rXvibhFkJ0lD5Z3kIIUT76O90AIYQQ+ZF4CyFECZF4CyFECZF4i1Jy8803d7oJQnSUwsR7m3PiR7sYWOrcrHe2rz4hug0GsDVr1hS+3wsvvNA/2sWSJUvc8ccf37b6ZgqlXSo4cFjU+Hc7N3LD9PYze1m0r+h/07+bc2NPRo8Nzr10bjFt7BQDb4n65pjoeVH0Zl70GHJu9Fbnhr8ef86gN+f0+t/fekH0uCaxn4Pi7fTP6LXxZ9W6GESPdq5vadyHI9e3rv923313d+qpp/qTHX72s5+5+++/X0s3S8573/te99a3vtVde+21nW5KqehptwkiNvsTFcH+ZvzMgDD7Q51u2fRgQOqLRHvrVfFxjf4xEtm3Tz2usY2x2NoDkUegTZwHI4Hv2yV6f0m8n/FH4v5CsA0G0YFDoxebW39cH//4x92b3vQmt27dOv9+w4YNbv/993fLli1rfeVCdBlBlve8tfGJvuW0ypcqlhsndNryHfxsLBTe2otE46WLo5P+0fD9mOsFofD7iRhdO2E1zlkZC2yybUbS6gupa+Dw2CLlOwjb+GPx+/7F8edsm/2RqO6zo+23JI5xTSxYL/5vfGwhdSWtXQRy/IHJfRNy7KHtsXYY40MVgd0yefvYgxP95S3oqF/Hb534fPisqJ4/JfbzeGyFD7xuYvvo+ngf/vgWuYZ87nOfc+9617vcOeec05SVtddee7lNmza5r371q34/X/rSl3LvA8wlwJ2yDAaQvvmKy/jTTjutWo4btNIWPlcCDCivec1r3K677lrdftVVV7nzzz8/qAxuD6zOI444ovr6pJNOcm984xt9/dZXXG18+tOf9jeMvfDCC+7nP/95U8eOq4U+POWUUyYdZ63f5Ctf+YrvH+pLX+GE7KdWP//2t791Z5xxhn9tx5tsm3HTTTdVf988be4linWbcBf5UCxa/XtGO/9AdEJHm4bznmPRfvpcLMb9CypW478iC/BHsViMbYq2HRwLEnUZ4zmvnBEiXATVAcfFImyMRAbe7BOi4zhislj2LYze3zlZeLOgbd665ft7xG0fnD9VaBsde972IMj9B0TPx8SDgFnU1hb6sVr2dZVjvn1iW1K4PTtMPa4pZRpAeAHYY489pny255HfdvN2O9CNvPhv9+yma9zTGy9ze7/tQrfTq05yd5+3vS/z3HPPuYMOOqgQ/+iOO+7oXnrpJS8ACCsigkvGhOVvf/ubFxBrN/V++ctfrgoIIMp8795773V//vOfq9tvvfXW4DJs43NEfptttvFCh3DTJvjd737nnxFu+g3RR0xf//rXT7sPGpHsHwYMBstVq1a5z3zmM7n3A/Qlgy8iTsgJBq7rrrvOH/+hhx7q+5e6DPpfNKZwn/fwFyZee5E6MP8++reLrMjPx2LUFw0CcyMLtW/n+DMTi/74jvWmfd526T+yIdr/hysWeFTP4KqJMtTvXQ6JY8APjG936y/y1Ue7k0I3Z0U8uHF8SdFtdOx52jPJ0o8GpNF76rfF13tIxad9i6vLwJLK9+8IO+Y0nPgIb9pa2mHfY9z8A052W4eecANztnd7HfUdt+N+y9ysubtMKoflh9VtFrGJQDPMmzfPfx9oDwJtvnS4++67/cOwqwZE1qxPxAgQ9Xo+95AygGBjmWPhJwc3vkO7EFCsbTvehx56yMfZaSXWP0D/4KLKC/1scYDouyuuuKIaK8j62AaqXraim6FYn3fK7zn+jIsnzHIy9tCEoOWxbvPQt3ti/1EbR2+PX+NKSMJ2Pjd/sQnYyLp89TFYYOHbqhzE0m9fPLlc1rGHtodBbejtsYsFtwlCXm91jh8A9onqvrlB+5m8PCq24PNY22lqnaCDOy3wz0/ddY7beNmS6Plct80ui93cXZe4Z/5yRbUcArB8+XJvfcIJJ5zgLr30Ui8KeXnssccmvX/iiSfctttuW32PYOI2sJUXixfHPxQia9x2223+GUGiDG6A5AAQUsYsa8BKxRJF3LDCcRXAK1/5Sv9s7+E3v/lN7mPOw7PPPjvp/X/+859J/RMK/WyDliaVi6WlE5Z9g63ce3tABLFIzQ/e/9r8LhMs6MGz4hUZDA488Gu3oz1Y0nY1lB4ojFkHV8rWsagRfSYvx56a8L8XyfMP3+Qeu+0M/wy8vu/iBd5d8vCNp0wpb9Ynl9l77723v5wvEgYDhBtr95FHHvEP3BlpfvCDH/irACxiXAyHHHKIb9NHP/rR4DImaGZtI5JYuVjhlO8WGExEd9GUeOPPzgLBwq+LsExnP1kkVz40Il0X1ijQTvz0TF7yun/B1O9ikeIfR8S8hXrP1DKN6vKiGVnLIz+MJ/d4jP01rN21yNuevox+9oPKQ1Mtar7HBDFWO26lLVN1NDe1/NVbNt/rrW2e84AVj5thhx1qOOMzSPvdX/ayl3lfMmBdY2VefvnlftKMRz0fLJf9uHJwMXzsYx/z29L+6KwyDAxY11i7WOJz5szx27kaALOCLbolHHnkkbmPuRbJfdaDwYyrBfz209lPFumrllbWNRMI8nkjwIgFl/3QF7vx/KQhk1/Vk35eLCh986PPjog3jVzZxH5C2nR3ZVkfk40bKhtfjITxosC6Kr5dhBVhYmIQ/3JywrJa1x2xf3pWZUVa2kWRVZcNFAMVC5f+Mcu5qWPPaA/+dFxW45EW9W0buzz892qIPMsKvc/8kqmfzT3P+d/Uu3KGYyE3bJUK7ht88n07xe8Z/Cg3/nQ8yZrkG9/4hp+YQjib8VXjdsAKtok/XBBY3jaxmIehoSHfhl/96lfe50q7WHECJpZMpAHtffWrX13dhpAjyFjnW7ZMLOEx/zb+aCOkDPVhaT/66KPeEreB5U9/iv8UuEhOPvlkd/jhh/sBZjoTlggwvnLaBbYCJnlcMDg46Ada2sLVAnz3u9/NvZ8Q1q9f7ydtV69eXf1t6TMGvKLrmkkEiffIL+J1wwgc4saqhcHVsWWNSFQnEfepTJJVlgkOnz9ZlEL3EwLii+CwksKWDiat/JC6ECXEk9UwrOgY31xZsZIy5PwEX0Wga7kosupC6Fjdgc+YbdS79bLKsrtmjj2jPUwUI+6Gb9MFtSd3+ytzXjV9+JX5Cn5XHkmqSwyj/utPLBHkNQ9fZ0q8zZJM+5tDYbWJrQwBXieXlOUBwaQ9NvlpSwUBsTzssMO8aCHqWPff//73vYDwHtcGgoHA2RI4wIKmPSY6EFIG9wjW5IMPxhMu9A/vk/1E/R/84Ae9n9+WCu677765j/vqq6/2lj1twofO1cWZZ5456biAQZG+sWWCDLxJkQzdTwj0N4MjyyXtt01a+UXWNZPo6XjeWJ3cdDLyk0hobphY4VHLf2xrrGutbe8E3daedsPaX072ZrD1x8llf0KUjdLeHl8EWMjeSj1uwlJN32yDZYkbBMsT90onhbLb2iOE6Bw9Ld5gE4i2jC55ow9ryVlT7d0cl0x1A7SbbmtPJ2nW6hZiptDTbhMhhCgrPR2YSgghyorEWwghSojEWwghSkhPiDdBhZSpQwgxkyhMvNudOikUbiMmGtyKFSs63RSRYLopvPguAarYD4+ibhcvGqUUE60ieKkgf4ijjz66GoaSO8W4lbXZgPjtgru33v/+90+6HVmUGwviz912djv1xo014hr0IEop1jsEiTcR0HhwmzBR0rgllbgC3D7MSN/tt6cm4xKL8sNt8fwXdYek6GWCxPvYY4/1Jwu+YwthycieDExvWOokSKY8gpDUUlmpk6BWSihcI+Q0tCuBdIqlZBqlousKoYypt6wfGaSJskebSPrLAJ5uL7Eo7rvvPt83lE32Y1EpvAyOqVEwqiLaHIJSiolOkine/LicLJz4aaFOvyeYPMGD+CNgmSdTHkFIainbD9RKnQTplFBvfvObpwSKtxRLYCdrLYqoK5Sypd6iH8w9QTQ/PucKjCsvTnQrx3+EwEFLly71/bRw4ULfj5Y1p4gUXgwAlpQACOFqvl2CTFlygqLaXCRKKSZaQbDPOyQSHCmP7A/JCcAobymPICS1lO2nXuqkeimhiDKWJFlXI/Euoq5QypR6C7BeEXYbPGirDcy0n3I800b66Ytf/KIXUcohLAgnwlFECi/z5RoIFA9AqE28i2hzKyxQpRQTRVNobJMsgecEOfHEE6uX8oTLBEQk+WdrlDqpXkqoZgW13XUlISRpUsRC+oe0WogOJ65Zl1hdSdHPKoP1aQMa1hzlCQGaTL0FbLMY18D3GyU/MAGlnMUeMet4un1oSREAo6BeKNgi2lw0SikmWkGweNfK+J0HSy1FEHy7lOfSl5NNhPcPvtu77rrLveMd73D77LOPtzSxSNluft2sMvVSb+FG6KbUWzMVpRQTRZC5zhuLDz8lVkkziV6NPKmlGtHKlFCtrqtMqbcAizU5eHBlwHvmNUJp5+8FRbS5WWZiSjGtGe9egixv/JVk8EAMWGXB5ZtZhaErLkJTS2URmhIKgbAJHrC0ThDqDywy/RSUKfUW8Fvzu1v6MfOn2sSnTSKae4f+TU4etqIPsyiizaHM9JRi001bJ1pLkHjzwyHY3KTDiWEk/ZhZhKaWCqFWSqj0BBifJ60KS+sEeSZzQuoKpWypt/jdmRCjTXzGfnC7WP+lJxE5ruTkYaM+bCaFVwhFtTmEmZ5SbLpp60RrmRHxvHENIAzJtc7dVpdSbwkhiqSUmXQQUFsixUQb1ikW1jXXXFPquoQQIpRSijc3VphLBPdC+k7FstYlhBChzAi3iRBC9Bo9Ec9bCCFmGhJvIYQoIRJvIYQoIRJvIYQoIT0v3kobVTzTTXEmhMhmxqdBy0Jpo4QQZaQn0qAJIcRMo7A0aFnplULST+VJUZVOdUX9ydvVi0obFYJSnIWlOLPkEkq5JcT0GZgzZ85ZjQpwEiMAa9eunRK857///W/1NZb5008/7a6//nr/ftGiRe4Nb3iDj/JGMB6CMv3zn/+sRq9DhG644QYfaQ/Bw5onNGlWGfZlokSkuJ/+9Ke+7HHHHeefLSree97zHh9VcGBgwF8ZjIyM+LslEZ8//OEPvj0PPPCAmz17tq8PQaGtPH7/+99PCo2ahdU1OjrqfvzjH/v2ki6N/f7617/2ZQgWxePvf/+76+vr86LHw/oLTj/9dH9c//jHP9w999zjy/K48cYbq+3JKrPzzjv7fqffaAOxozlWxP4Vr3iF+9a3vuV/N277p8+INEj/cOs/5a2PQ34vyp199tm+DMke6Hv6eLfddvNtWrdu3aR+et/73ufLEu2P30AI0TyFpkFrRGj6qZAyPGPZmnXMNsKeEmrULEdoZ9oopTjLTnFGirxW5IgUohfpWGyTkPRT9cogSjySrg5Ih6htZ9oopTibKNcoxZmEW4hiaFsatKJBeJIZ0yGdK7BbUIozIUTRZIo3ltKKFSu8tUUY1FALtohUTvXgch8LsUgrbrqrZkJSnF100UXVNuNiseznSZLuFXP1pN1BWWXSKc5wfUBIirOkNZ5FMynO5DYRohgKS4OWlV4JstJPhaaoYlUEE6T4WZn4wrqkPVikeQU4K21UKEpxlp3iTGm1hCiOwtKgZaVXgqz0U6EpqszCpCwiDghHUsBCyUobFYpSnGWnOFNaLSGKQ/G8C0ApzoQQ7abnY5sIIUQZkXgLIUQJkdtECCFKiCxvIYQoIRJvIYQoIRJvIYQoIRJvIYQoIRLvGYDSjgnRewSJN+LAI5nrkRtT7OYUIYQQ7SWX5W2xOYQQQnSW4JCwxOMgDkcyeUCaRqnJ8qTnykJpx5R2TIheJ9jyJsgRArhs2bKan5twEa0OsSBCH8GKLHCURexDDEkMgHghcBbNjtCleSDRAJEEqYvATAwsp556avVzIvWxnceTTz7pPyf7TBJEmTbzuZXlkYwTnlUm9LgIAct+CMrE94G+MVcU5TgW+pgAX6QTY4BAuBmgrBzCTVQ+PuNh0QlrQRxv6LZY7EKI6ZMrkw7CjOVYK5xnaGqyrPRcoSjtmNKOCdHL5PJ5k4yBGN61Au4jXFi3NrnJA6HBioSkZY3VjMVKSNJ0eq5QaqUdw8VgIHrEvraJ1cWLF/vtiKxBijAgmQFluHpIDgAhZUKPi35D2I28accYFImvDem0Y42QcAsxM8lleWMdYl1bpvY0jVKTtTM9l9KOCSFmOrkTECPOpEVDGJM5I0NSk4Wk5wpFacdilHZMiN4kt3gjBGROwU2SFO+Q1GQh6blCUdoxpR0TopfJLd6AOJt1aYSkJgtJzxWK0o4p7ZgQvUwp43kr7ZgQotdRbBMhhCghEm8hhCghpXSbCCFEryPLWwghSojEWwghSojEWwghSojEWwghSkjbxZs7CZMZeYSYDkoBJ3qVoDssOUGScGff/fffPyW5QQh2J6HibQghRPME3x7PrdrE5ABilnCb+apVq3zMaCGEEO0lWLwRbku0ABb0KElIGjQjac0TK4R9E/mPmB2WiCBdF+nFsPRD0qBltSeUWnUl05LlOXalgFMKOCGKoqnAVLWwkxchJoY2J7wFT+Ikve666/x2ovohxJxUBlH+gGQPnHDEC0+KN6FTOamT4kPiAwJCsR/qom7SoNmJntWePFAXsC+iCiKaDDRpca5XF9v4vMgUcI2O3VLAAbHFLQVcMhaMpXejXy3mOdRKAVevTOhxWQo4u3rjc4KXESAMYbVyiHgyBdzChQurKeAol0wBlxVRUSngxEwnWLwRLZsYMrdJMhZ1Vho0i4ltJ3Ytawhxxpe+//77V7cRrxqrL+13z0qDFpqWLQTqWrlypW+fxfMmQmDeupQCTinghCiKYPHmxEkmAcAasxCswMlbS2TzpjjDqmNgMMuW0K6AVZ6kVhq05IlcVHusLhOiWiKWVReWpbkFsJpJrcbVRJEp4JLHjuideOKJVVeHxQhHZE3MaAO/JwORWcRcHSVFP6tM6HGlk07kTQEHtkIpnQLuzDPPrNtPEm4xkwkWb/NLY71973vf8wkK0kLWKA1aKJbswZInLFiwYIrLJJQi2lNEXUoBJ4Qomtw+b05YLCIuZ7HwzAoLSYOWJPndNJbsAWsL0cHHmaZRGrRm2jMdlAJOKeCEaDdNTVheeeWVXryXL19eXSoYkgYN1q9f76231atXVy1DrPhkZppf/vKXVfGGtMsEGqVBy9OeIlAKOKWAE6LdNCXenPyIBSeHWdAhadCAkxAxwZdpSwdxi6T3zzb8uPVcJo3SoEFoe4pAKeCUAk6IdtO18bxtzXetdbq9nAatl49dCDFBYeu8i4DLZS7tuQw3n6h8lkIIMZWuiiqIL5Q13sPDw36SUrfeCyFEbbrWbSKEEKI+XWV5CyGECEPiLYQQJUTiLYQQJUTiLYQQJaSnxFsps9pDt/Vzs+1pVcq+buufMkG/sRKNPuSRFSLB4He079Tr/5Ay3URXrfMWoptQyr7uwuLmc/ethdbYuHFj0HeTMfPtzuRmynQTEm8hRCngPhDCPTRzd7HFjId6whxSppsIEu8ypt5qZ8qsMvYPtDs1WSO4TMWishPT6k+2N6SfQ9qT9VuEpOwzslLtFdU/If+NkD4E4u9wfBbpkd/36quvnhRLJqRM1rEX8X9OwueWISpN6LFPl9BUje0g2PIuW+qtdqfMKlv/dCI1WRFk9XNIe7J+i5CUfRCSaq+o/gn5b4TAb8zDgozxH2GA+eQnP1kVo5AyIcdexP/ZIk4aROu0eYh05Ml2kCdVY6sJFu8ypd6iXe1OmVWm/oFOpCYrgkb9HPq7Z/0WISn7ICv9Xd7/YSNCf/csEEp+d0vrB0z6JX3HIWVCUv8V8X9OR5xkMLXY9LUiT7aaPKkaW02weJcp9ZaN1O1MmVWm/oFOpSabLo36OfR3D/ktQshKf9fM/7AeIf+NEPjdcXslhTItgCFlQtIMFvF/ZnCwAYK60m6rThCaqrHVFDJhqdRbjVH/dA+hv0Uo7Uq1F/LfCMUGq+mWyTr2Iv7P3UiRqRqnQ7B4lyn1VidSZpWpf6BTqclCSe4zSaN+DmlPnt/CqJeyLyv9XdH9E/LfSFKrD/ndueRPuuuaKROaZrCI/3Mz1Pv/GPxvsmhUJiRVY6sJFu8ypd7qRMqsMvUPdCI1WSMscxLHB+bSSPYPNOrnkPaE/haQlbIvK/1dkf0T8ruH9CFuB9pMEnHe2z43b95c/e+HlAlJ/VfU/zmE0P8PMDjxv7G6cSnahHdomZBUja0mWLzLlnqr3SmzytY/nUhN1giWoeHa4dio5/LLL/e+4WT/ZPVzSHtCfwsr2yhlX0j6u6L6J+R3D+nDZJuT+0tajnnL1Dv2ov7PIYT+f4DfhJUzVi/+/TRZZUJSNbaaoHjeSr3VGPVPe1A/i26iUarGdqA7LIUQIpBuStXYU4GphBBiOnRTqkalQRNCiBIiy1v0FM8//3ynmyBEIUi8hRCihEi8hRCihEi8RSlpdxAgIbqNwsR7m3PiR7sYWOrcrHe2rz4hhOgmSrvOe+CwqPHvdm7khuntZ/ayaF/HR6PYbs6NPRk9Njj30rnFtLFTDLwl6ptjoudF0Zt50WPIudFbnRv+evw5g96c0+t/f+sF0eOaxH4qYT/on9Fr48+qdTGIHu1c39K4D0eub13/EfeC2N0WApZbtAnPmU5qIUQv0NNuE0Rs9icqgv3N+JkBYfaHOt2y6cGA1BeJ9tar4uMa/WMksm+felxjG2OxtQcij0CbOA9GAt+3S/T+kng/44/E/YVgGwyiA4QJ2dz64yJwP7crr1u3zr8nPgtrbpctW9b6yoXoMoLEe97ayS4RRI9ttdwWg5+NP5v3f9HrNdHJv2e+/Zj7pbqftfFrY87KynfePbFPe/BZnroGDo8tUizFvvmROD0Wv+9fHH+O2PEdLNBJx7gm3m7HFlKXbfNlfzi1b0KOPbQ9W06LH1t/FF+ZjNxcKbhl8vfGHoyPncfoeuet9PGJ2FVu+KzoK6ck9nNlpd9eN1GG7w39T/TZL1wmJD3AV91sRnaCFhG3wuJeENf52GOPbTqYmBBlpli3SSSAWG9Yaf2RkMz6QCSo0abhvLHTo/30udga7F9QsRr/FYsIYjG2Kdp2cGzxUZcxnvPKGXcALgIEkjpgLJGMeiQy8GafEB3HEVG9t0xs71sYvb8zqu/R8Lpom7du+f4ecdsH58ciO4kGx563PVjI/QdEz8dEn6+dsKitLWObEmUrgjxy+8S20YSQe2rkaZhSpgGN0s3teeS33bzdDnQjL/7bPbvpGvf0xsvc3m+70O30qpPc3edt78s899xzPtBQs+IvxEyicJ/38BcmXnuROjD/Pvq3c+7Fz8dihDU59+Loeef4MxOL/kq43mZ93nbpP7Ih2v+HKxZ4VM/gqoky1O9dDoljwOrFt7s1wNJMQruTQjdnRTy4cXxJ0W107Hnak/RrMyCN3lO/Lb7eQyo+7VtcXQYqWd1G7wg75jT10s3tsO8xbv4BJ7utQ0+4gTnbu72O+o7bcb9lbtbcXSaVw7eN1W0RBS2TiRC9SLE+75Tfc/wZF0+Y5WTsoQlBy2Pd5qFv98T+ozaO3h6/Hntwcjm287n5i03ARtblq4/BAgvfXCOIpd++eHK5rGMPbQ+D2lBktQ+fHe1nKBbyeqtz/ACwT1T3zQ3az+TlUbEFn8faTlMriM/gTgv881N3neM2XrYkej7XbbPLYjd31yXumb9cUS3HpOTy5curoUmJ6HbppZf6iUwheo2WTlj2ZWdS6noQQSxS84P3vza/ywQLevCseEUGgwMPJv/a0R4sabsaSg8UxqyDK2XrWNSIPpOXY09NrFgpkucfvsk9dtsZ/hl4fd/FC7y75OEbp4Z/NWubUJxEdlu1atWUMkLMdJoS7/49s8sgWPh1Rxtk1QrZTxbJlQ+NSNeFNQp+km8onrzkdf+Cqd/FIsU/joh5C/WeqWUa1eVFM7KWR344MUE49tewdtcib3vSE6NTPl8aW/xpi5rvMQmM1Y5baUsBYbRr+au3bL7XW9s85wErvlHSZCFmMkE+bwQYsbCVD31xpiI/acjkV/WknxcLCis3Bo6IN9kKhVz7CWnT3ZVlfUw2bqhsfDESxosC66r4dhFWhImJQfzLyQnLal13xP7pWZUVaWkXRVZdNlAMVCxc+scs56aOPaM9+NNxWY2/ENW17cTqlNEaIs+yQu8zv2TqZ3PPc/439a6c4cmreWwtN+4bfPJ9O8XvGfwoN/50PMmaZLrp5ixlm6UkW7Nmjbe8ybwiRK8RJN4sA2PdMAKHuLFqYXB1bFkjEtVJxH0qk2RD8cTa8PmTRSl0PyEgvggOKyls2WDSyg+pC1FCPFkNw4qO8c2VFSspQ85P8FUEupaLIqsuhI7VHfiM2Ua9Wy+L99fUsWe0h4lixN3wbbqg9uQuq1H8MdTy4VfmK/hdeSQx8ab/+hcl9rcofvg6U+I93XRzrDYhnrKlJOM1ws2SQSF6jZ6O543VyU0nIz+JhOaGiRUetfzHWJizPxIvTZzuXZ1F0G3taTesFye3ZF4ICbv99tsX3yAh2kxpb48vAixkb6UeN2GpYjHa2mtcQFiWuEGwPHGvdFIou609QojO0dOWdxJbRpf0P+O7xdXhJ/Nun+oGaDfd1p4yIstbzBQk3qKnkHiLmYLEWwghSkhPRxUUQoiyIvEWQogSIvEWQogS8v9uS5IEKLKLSwAAAABJRU5ErkJggg=="},559:function(s,t,e){s.exports=e.p+"assets/img/winRDP.81904365.png"},560:function(s,t,e){s.exports=e.p+"assets/img/xrdp.1b739305.png"},589:function(s,t,e){"use strict";e.r(t);var n=e(17),a=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#前言"}},[s._v("前言")])]),n("li",[n("a",{attrs:{href:"#架构选择"}},[s._v("架构选择")])]),n("li",[n("a",{attrs:{href:"#环境说明及前置工作"}},[s._v("环境说明及前置工作")])]),n("li",[n("a",{attrs:{href:"#配置lxd-gpu环境"}},[s._v("配置LXD-GPU环境")])]),n("li",[n("a",{attrs:{href:"#管理员指北"}},[s._v("管理员指北")])]),n("li",[n("a",{attrs:{href:"#用户指南"}},[s._v("用户指南")])]),n("li",[n("a",{attrs:{href:"#参考资料"}},[s._v("参考资料")])])])]),n("p"),s._v(" "),n("h2",{attrs:{id:"前言"}},[s._v("前言")]),s._v(" "),n("p",[s._v("本文的受众为实验室的公用GPU服务器管理员，需要有一定的Linux基础，或者对此感兴趣的普通用户。")]),s._v(" "),n("p",[s._v("如果您并不关心为何这样配置服务器环境，以及对如何部署、管理这样一台服务器不感兴趣，可以选择跳过这些内容，前往"),n("RouterLink",{attrs:{to:"/blogs/blog/2023-06-23.html#管理员指北"}},[s._v("管理员指北")]),s._v("、"),n("RouterLink",{attrs:{to:"/blogs/blog/2023-06-23.html#用户指南"}},[s._v("用户指南")]),s._v("。")],1),s._v(" "),n("p",[s._v("事情的起因是实验室购入了一台公用GPU服务器，考虑到每个人所需的软件和环境差异巨大，因此，需要一种方案来满足多用户对服务器的使用的需求。")]),s._v(" "),n("p",[s._v("这里列出一些期望达到的目标：")]),s._v(" "),n("ul",[n("li",[s._v("不同用户之间不能相互影响")]),s._v(" "),n("li",[s._v("用户要能便捷地访问服务器")]),s._v(" "),n("li",[s._v("用户的操作不能影响到宿主机的稳定运行")]),s._v(" "),n("li",[s._v("用户应当可以自由地访问外部网络")]),s._v(" "),n("li",[s._v("用户应当可以使用GPU，不同用户可以共享GPU")]),s._v(" "),n("li",[s._v("用户应当可以自由地配置程序运行环境")]),s._v(" "),n("li",[s._v("管理员应该能轻松地管理用户")])]),s._v(" "),n("p",[n("strong",[s._v("注意：")]),s._v(" "),n("em",[s._v("本次部署属于科研基础架构的部署，属于各种软件的工程实现和部署，本身并不具备科研价值，同样也无法基于该方法搭建的服务器实验运行结果、实验数据产出做出任何保障。")])]),s._v(" "),n("h2",{attrs:{id:"架构选择"}},[s._v("架构选择")]),s._v(" "),n("p",[s._v("从最初的需求出发，我们想要不同用户之间不能相互影响，也就是在用户级别进行隔离，主流的隔离方案包括Docker（容器化）、LXC（Linux容器）、OpenVZ（虚拟机）。")]),s._v(" "),n("p",[s._v("首先是容器方案，以Docker为例。考虑到开销问题，Ubuntu in Docker 首先被排除备选。Docker有成熟的"),n("a",{attrs:{href:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#container-runtimes",target:"_blank",rel:"noopener noreferrer"}},[s._v("NVIDIA-Docker"),n("OutboundLink")],1),s._v("支持，可以允许不同容器之间共享GPU，Docker成熟的网络接口也使容器的可访问性得到了保障，同时可以使用Linux内核的"),n("a",{attrs:{href:"https://manpages.ubuntu.com/manpages/focal/en/man7/cgroups.7.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("cgroups"),n("OutboundLink")],1),s._v("灵活分配硬件资源，是一个不错的备选方案。")]),s._v(" "),n("p",[s._v("OpenVZ、KVM、Xen等虚拟机方案在资源利用上不够轻量，管理上相较Docker也复杂很多，同样基于开销问题将其排除备选。")]),s._v(" "),n("p",[s._v("LXC可以理解为内核级的容器，允许不同容器之间共享GPU，相比Docker更加轻量，也可以更方便地使用系统资源。")]),s._v(" "),n("p",[s._v("Docker的隔离更偏向于运行环境的隔离，将应用和全部依赖环境全部打包到一个单一对象中，可以在不包含完整的操作系统的情况下运行应用，而LXC基于namespaces进行隔离，可以用"),n("strong",[s._v("更低的开销")]),s._v("提供灵活的系统环境，支持用户在系统层面肆意整活，这给了我充足的理由选择LXC。"),n("strong",[s._v("甚至")]),s._v("用户可以在LXC容器中再套娃一个Docker，既然如此，也没什么好纠结的了。")]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("什么？你问LXD？")])])]),s._v(" "),n("blockquote",[n("p",[s._v("那只是我用原生LXC觉得太麻烦，并且解决了LXC支持跨主机容器迁移不完全、容器管理复杂等问题的备胎，不提也罢（×）。\nby yuany3721")])]),s._v(" "),n("br"),s._v(" "),n("details",[n("summary",[s._v("如果您对LXC与LXD的区别感兴趣，您可以展开这里了解一些信息")]),s._v(" "),n("p",[s._v("就在本次部署的两周前，LXD于2023年6月4日正式移交给Canonical，"),n("a",{attrs:{href:"https://linuxcontainers.org/lxd/#project-announcement"}},[s._v("公告")]),s._v("中展示了这一动作的具体变化。")]),s._v(" "),n("p",[s._v("就使用体验而言，LXD无疑是远超LXC的，尽管它们似乎（可能就是）用的同一种实现方式和内核。")]),s._v(" "),n("p",[s._v("以下是一些功能在使用上的区别，也正是复杂性的问题，使我放弃了直接使用LXC的想法，转而由LXD实现本次部署。")]),s._v(" "),n("table",[n("tr",[n("th",[s._v("功能")]),n("th",[s._v("LXC")]),n("th",[s._v("LXD")])]),s._v(" "),n("tr",[n("td",[s._v("新建容器")]),n("td",[n("code",[s._v("lxc-create -t download -n template -- \\ "),n("br"),s._v("\n                --dist ubuntu --release jammy --arch amd64")])]),n("td",[n("code",[s._v("lxc launch tuna-images:ubuntu/jammy template")])])]),s._v(" "),n("tr",[n("td",[s._v("启动容器")]),n("td",[n("code",[s._v("lxc-start -n template")])]),n("td",[n("code",[s._v("lxc start template")])])]),s._v(" "),n("tr",[n("td",[s._v("向容器中注入命令")]),n("td",[n("code",[s._v("lxc-attach -n template -- apt update")])]),n("td",[n("code",[s._v("lxc exec template -- apt update")])])]),s._v(" "),n("tr",[n("td",[s._v("修改容器配置")]),n("td",[n("code",[s._v("vi path/to/lxc/template/config")])]),n("td",[n("code",[s._v("lxc config edit template")])])]),s._v(" "),n("tr",[n("td",[s._v("挂载GPU")]),n("td",[n("code",[s._v("for x in $(ls /dev/nvidia*); do"),n("br"),s._v("\n                echo lxc.mount.entry = $x $(echo $x | cut -b 2-) none bind,optional,create=file >> path/to/lxc/template/config"),n("br"),s._v("\n                done")])]),n("td",[n("code",[s._v("lxc config device add template gpu gpu")])])])]),s._v(" "),n("p",[s._v("上述举例如果不能使您窥见一斑，您可以尝试参照"),n("a",{attrs:{href:"https://linuxcontainers.org/lxc/manpages/"}},[s._v("LXC文档")]),s._v("、"),n("a",{attrs:{href:"https://documentation.ubuntu.com/lxd/en/latest/"}},[s._v("LXD文档")]),s._v("进行尝试。")])]),s._v(" "),n("br"),s._v(" "),n("h2",{attrs:{id:"环境说明及前置工作"}},[s._v("环境说明及前置工作")]),s._v(" "),n("h3",{attrs:{id:"环境说明"}},[n("strong",[s._v("环境说明")])]),s._v(" "),n("p",[s._v("本次的物理机硬件环境如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("CPU: Intel(R) Xeon(R) Platinum 8336C CPU\nRAM: Samsung DDR4 SingleBitECC 3200 MT/s * 4\nGPU: NVIDIA GeForce RTX 4090 * 2\nDisk: Samsung SSD 980 1TB + WUH721816AL 14TB\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("宿主机所在网络环境如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("gateway: 172.16.60.1/23\nmask: 255.255.254.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"前置工作"}},[n("strong",[s._v("前置工作")])]),s._v(" "),n("ol",[n("li",[s._v("安装Ubuntu Server")])]),s._v(" "),n("p",[s._v("选择Ubuntu Server 22.04.2作为宿主机的系统，使用rufus制作系统启动盘后插入服务器，使用SuperMicroIPMIView扫描IPMI端口，连接IPMI服务安装系统，细节省略。")]),s._v(" "),n("p",[n("em",[s._v("这里其实可以通过网络安装ubuntu，但是没有折腾，mark一下以后有机会进行尝试")])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("配置系统环境")])]),s._v(" "),n("p",[s._v("参考"),n("RouterLink",{attrs:{to:"/blogs/note/linux/2023-06-20.html"}},[s._v("Ubuntu Server基本环境配置")])],1),s._v(" "),n("ul",[n("li",[n("p",[s._v("配置系统联网超时")])]),s._v(" "),n("li",[n("p",[s._v("配置swap分区")])]),s._v(" "),n("li",[n("p",[s._v("配置数据盘挂载")]),s._v(" "),n("p",[s._v("将"),n("code",[s._v("WUH721816AL 14TB")]),s._v("格式化为"),n("code",[s._v("/dev/sda1")]),s._v("，并挂载在"),n("code",[s._v("/data")]),s._v("目录")]),s._v(" "),n("p",[s._v("设置data目录权限：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" /data\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +t /data\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("配置OpenSSH（可选）")]),s._v(" "),n("p",[s._v("允许密码登录、修改服务端口为33")])]),s._v(" "),n("li",[n("p",[s._v("配置防火墙")]),s._v(" "),n("p",[s._v("参考"),n("RouterLink",{attrs:{to:"/blogs/note/linux/2021-09-28.html"}},[s._v("ufw防火墙配置")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw allow "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v("/tcp\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw reload\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])])]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("配置网桥")])]),s._v(" "),n("p",[s._v("在类似我们的方案中，"),n("a",{attrs:{href:"https://abcdabcd987.com/setup-shared-gpu-server-for-labs/",target:"_blank",rel:"noopener noreferrer"}},[s._v("为实验室建立公用GPU服务器"),n("OutboundLink")],1),s._v("、"),n("a",{attrs:{href:"https://github.com/shenuiuin/LXD_GPU_SERVER",target:"_blank",rel:"noopener noreferrer"}},[s._v("实验室GPU服务器的LXD虚拟化"),n("OutboundLink")],1),s._v("等实操中（不知道为什么）采用了基于iptables、端口映射的技术实现绕过宿主机访问容器。")]),s._v(" "),n("p",[n("strong",[s._v("但是！这一点也不优雅！")]),s._v(" 服务器就在内网，又不缺IPv4地址，为何要加上端口号访问呢？因此，我在宿主机中建立了一个网桥，lxc容器通过网桥直接从网关DHCP获取IP。")]),s._v(" "),n("p",[s._v("在Ubuntu22.04中，系统默认使用netplan配置网络。我们直接以修改netplan配置的方式新建一个网桥：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/netplan\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份默认配置")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" 00-installer-config.yaml 00-eno1-br0-bridge.yaml\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" 00-installer-config.yaml 00-installer-config.yaml.bak\n\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" 00-eno1-br0-bridge.yaml\n\nnetwork:\n  renderer: networkd\n  ethernets:\n    eno1:\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 固定IP")]),s._v("\n      dhcp4: no\n  bridges:\n    br0:\n      interfaces: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("eno1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这是修改网桥之前eno1网卡获取到的ip，保持一致可以避免一些麻烦")]),s._v("\n      addresses: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".61.82/23"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      routes:\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置默认网关，gateway4已经被标记为deprecated不建议使用")]),s._v("\n        - to: default\n          via: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".60.1\n          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加上权重，不进行配置的话产生冲突，使用route命令查看路由表会看到eno1和br0两条default路由，导致无法联网")]),s._v("\n          metric: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n      nameservers:\n        addresses:\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# DNS服务器，edit as you like")]),s._v("\n          - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("114.114")]),s._v(".114.114\n          - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.8")]),s._v(".8.8\n          - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.8")]),s._v(".4.4\n  version: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 应用网络")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" netplan try\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("p",[s._v("检查网络配置，"),n("code",[s._v("ip a")]),s._v("类似这样：")]),s._v(" "),n("blockquote",[n("p",[s._v("2: eno1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq master br0 state UP group default qlen 1000"),n("br"),s._v("\nlink/ether 3c:ec:ef:cc:60:28 brd ff:ff:ff:ff:ff:ff"),n("br"),s._v("\naltname enp6s0"),n("br"),s._v("\n5: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000"),n("br"),s._v("\nlink/ether d6:87:d1:44:19:7c brd ff:ff:ff:ff:ff:ff"),n("br"),s._v("\ninet 172.16.61.82/23 brd 172.16.61.255 scope global br0"),n("br"),s._v("\nvalid_lft forever preferred_lft forever"),n("br"),s._v("\ninet6 fe80::d487:d1ff:fe44:197c/64 scope link"),n("br"),s._v("\nvalid_lft forever preferred_lft forever")])]),s._v(" "),n("p",[n("code",[s._v("route")]),s._v("类似这样：")]),s._v(" "),n("blockquote",[n("p",[s._v("Kernel IP routing table"),n("br"),s._v("\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface"),n("br"),s._v("\ndefault            _gateway        0.0.0.0              UG    100     0        0     br0"),n("br"),s._v("\n172.16.60.0     0.0.0.0            255.255.254.0   U       0        0        0     br0")])]),s._v(" "),n("h2",{attrs:{id:"配置lxd-gpu环境"}},[s._v("配置LXD-GPU环境")]),s._v(" "),n("h3",{attrs:{id:"配置运行环境"}},[n("strong",[s._v("配置运行环境")])]),s._v(" "),n("ol",[n("li",[s._v("安装LXC、LXD")])]),s._v(" "),n("p",[s._v("这里的LXD使用"),n("code",[s._v("5.0/stable")]),s._v("版本，请使用前先查阅"),n("a",{attrs:{href:"https://documentation.ubuntu.com/lxd/en/latest/installing/#how-to-install-lxd",target:"_blank",rel:"noopener noreferrer"}},[s._v("LXD官方安装指引"),n("OutboundLink")],1),s._v("修改安装版本号。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" lxc\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" snap instll lxd --channel"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),s._v("/stable\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("如果需要的话，可能有必要进行"),n("RouterLink",{attrs:{to:"/blogs/note/linux/2023-01-10.html"}},[s._v("apt换源")])],1),s._v(" "),n("p",[s._v("由于snap只有server outside the Great Firewall，所以提示"),n("code",[s._v("Unable to contact snap store")]),s._v("的时候，可能需要一点点科学上网手段，以下是临时设置snap代理的方法：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" snap "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" system proxy.http"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your proxy url"')]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" snap "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" system proxy.https"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your proxy url"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("检查lxc的依赖")])]),s._v(" "),n("p",[s._v("使用"),n("code",[s._v("lxc-checkconfig")]),s._v("检查lxc容器的必要组件。具体到本次配置，该命令显示系统存在以下问题：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Cgroup v1 systemd controller: missing\nCgroup v1 freezer controller: missing\nCgroup ns_cgroup: required\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("在Ubuntu22.04中，默认情况下不会启用cgroup v1 systemd controller和ns_cgroup。编辑"),n("code",[s._v("/etc/default/grub")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('GRUB_CMDLINE_LINUX="cgroup_enable=memory systemd.unified_cgroup_hierarchy=0 cgroup_namespace.enable=1"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("保存并退出后，更新GRUB配置并重新启动系统以应用修改。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("update-grub")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("配置防火墙以适应网桥")])]),s._v(" "),n("p",[s._v("在Ubuntu22.04（大概率以及未来的版本）中，ufw改变了它的默认规则，需要修改网桥的route属性，否则会导致lxc容器无法从外部网关获取IP，即使正确地配置了daemon、dhcp等所有服务。参考"),n("a",{attrs:{href:"https://discuss.linuxcontainers.org/t/ubuntu-22-04-lxd-networking-issue-not-getting-ips-and-solution-please-verify-correctness/14739",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ubuntu 22.04 LXD networking issue, not getting IPs, and solution"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw allow out on br0\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw route allow out on br0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"配置基础镜像"}},[n("strong",[s._v("配置基础镜像")])]),s._v(" "),n("p",[n("em",[s._v("注：以下配置过程中，"),n("code",[s._v("$")]),s._v("开头表示命令在宿主机中运行，"),n("code",[s._v("root@template:~#")]),s._v("开头表示命令在template容器中以root身份（exec进去的）运行。")])]),s._v(" "),n("ol",[n("li",[s._v("初始化LXD环境")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ lxd init\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("以下是我的配置选项，仅供参考：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('Would you like to use LXD clustering? (yes/no) [default=no]: no\nDo you want to configure a new storage pool? (yes/no) [default=yes]:\nName of the new storage pool [default=default]: lxd-pool\nName of the storage backend to use (cephobject, dir, lvm, zfs, btrfs, ceph) [default=zfs]:\nCreate a new ZFS pool? (yes/no) [default=yes]:\nWould you like to use an existing empty block device (e.g. a disk or partition)? (yes/no) [default=no]:\nSize in GiB of the new loop device (1GiB minimum) [default=30GiB]: 50GiB\nWould you like to connect to a MAAS server? (yes/no) [default=no]:\nWould you like to create a new local network bridge? (yes/no) [default=yes]: no\nWould you like to configure LXD to use an existing bridge or host interface? (yes/no) [default=no]: yes\nName of the existing bridge or host interface: br0\nWould you like the LXD server to be available over the network? (yes/no) [default=no]:\nWould you like stale cached images to be updated automatically? (yes/no) [default=yes]:\nWould you like a YAML "lxd init" preseed to be printed? (yes/no) [default=no]: yes\nconfig: {}\nnetworks: []\nstorage_pools:\n- config:\n    size: 50GiB\n  description: ""\n  name: lxd-pool\n  driver: zfs\nprofiles:\n- config: {}\n  description: ""\n  devices:\n    eth0:\n      name: eth0\n      nictype: bridged\n      parent: br0\n      type: nic\n    root:\n      path: /\n      pool: lxd-pool\n      type: disk\n  name: default\nprojects: []\ncluster: null\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("p",[s._v("修改默认配置文件，限制默认存储大小，避免一个容器占满硬盘")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ lxc profile edit default\nconfig: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\ndescription: Default LXD profile\ndevices:\n  eth0:\n    name: eth0\n    nictype: bridged\n    parent: br0\n    type: nic\n  root:\n    path: /\n    pool: lxd-pool\n    size: 50GB\n    type: disk\nname: default\nused_by: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("创建基础容器模板")])]),s._v(" "),n("p",[s._v("添加清华LXC镜像，创建"),n("code",[s._v("template")]),s._v("容器模板")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ lxc remote "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" tuna-images https://mirrors.tuna.tsinghua.edu.cn/lxc-images/ --protocol"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("simplestreams --public\n$ lxc launch tuna-images:ubuntu/jammy template\nCreating template\nStarting template\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("配置基本环境")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器")]),s._v("\n$ lxc "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" template "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改默认用户的密码 ")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# passwd ubuntu ")]),s._v("\nyourpassword\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改时区")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timedatectl set-timezone Asia/Shanghai")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改apt源")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp /etc/apt/sources.list /etc/apt/sources.list.bak")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vi /etc/apt/sources.list")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注释掉源码部分加快apt update速度")]),s._v("\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse\ndeb https://mirrors.ustc.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse")]),s._v("\n\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt update")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt upgrade -y")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装ssh server")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt install -y openssh-server")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装必要软件")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt install -y ufw net-tools")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("配置GPU环境")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载gpu")]),s._v("\n$ lxc config device "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" ContainerName gpu gpu\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看显卡设备文件")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /dev/nvidia*\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装显卡驱动")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt install -y ubuntu-drivers-common")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ubuntu-drivers devices")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ubuntu-drivers autoinstall")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nvidia-smi")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁用自动更新(23.08.11update)")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt-mark hold *nvidia*")]),s._v("\nroot@template:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt-mark showhold")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显卡驱动版本")]),s._v("\ndpkg -l "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nvidia\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# NVRM版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/driver/nvidia/version\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[s._v("出现类似以下界面说明显卡驱动配置成功。")]),s._v(" "),n("p",[n("img",{attrs:{src:e(556),alt:"nvsmi"}})]),s._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[s._v("发布"),n("code",[s._v("template")]),s._v("作为基础容器模板")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ lxc stop template\n$ lxc publish template --alias template --public\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("基于"),n("code",[s._v("template")]),s._v("建立带桌面环境的容器模板")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ lxc launch template template-gnome\n$ lxc "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" template-gnome\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装gnome桌面")]),s._v("\nroot@template-gnome:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt install --no-install-recommends -y ubuntu-desktop")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装xrdp远程")]),s._v("\nroot@template-gnome:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt install -y xrdp")]),s._v("\nroot@template-gnome:~"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl enable xrdp")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("发布"),n("code",[s._v("template-gnome")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ lxc stop template-gnome\n$ lxc publish template-gnome --alias template-gnome --public\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("strong",[s._v("至此，本次服务器的环境部署就完成了，以下为管理员与用户的使用说明。")])]),s._v(" "),n("h2",{attrs:{id:"管理员指北"}},[s._v("管理员指北")]),s._v(" "),n("p",[n("strong",[s._v("注意：")]),s._v(" 宿主机的权限对您是完全开放的，如果您需要在宿主机中执行任何本节之外的命令，请您执行前务必完全明确您的操作会带来什么后果。")]),s._v(" "),n("h3",{attrs:{id:"如何访问宿主机"}},[n("strong",[s._v("如何访问宿主机")])]),s._v(" "),n("p",[s._v("您有两种连接宿主机的方式：")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("使用ssh工具访问"),n("strong",[s._v("宿主机IP的33端口")]),s._v("，并使用"),n("strong",[s._v("用户名")]),s._v("和"),n("strong",[s._v("密码")]),s._v("进行认证；")])]),s._v(" "),n("li",[n("p",[s._v("在浏览器中访问"),n("strong",[s._v("宿主机的IPMI端口IP")]),s._v("，并使用"),n("strong",[s._v("IPMI用户名")]),s._v("和"),n("strong",[s._v("IPMI密码")]),s._v("进行认证，进入“远程控制”选项卡，启动控制台。")])])]),s._v(" "),n("p",[s._v("这两种方法的区别在于，ssh访问的是Ubuntu系统，您只能在系统级别对宿主机进行控制，使用IPMI访问则可以获得宿主机包括BIOS、硬件在内的完全控制。"),n("strong",[s._v("如非必要，不建议访问IPMI端口进行管理")])]),s._v(" "),n("h3",{attrs:{id:"新建容器"}},[n("strong",[s._v("新建容器")])]),s._v(" "),n("p",[s._v("当前已经配置好了"),n("code",[s._v("template")]),s._v("、"),n("code",[s._v("template-gnome")]),s._v("、"),n("code",[s._v("template-docker")]),s._v("三种容器模板，分别代表最基础的命令行容器、带gnome桌面和xrdp远程的容器、带docker环境的命令行容器，推荐用户使用"),n("code",[s._v("template")]),s._v("进行操作。")]),s._v(" "),n("p",[s._v("以用户提供的容器名为"),n("code",[s._v("yuany3721")]),s._v("为例，以下操作可以为该用户新建一个容器：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建容器")]),s._v("\n$ lxc launch template-docker yuany3721\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载GPU")]),s._v("\n$ lxc config device "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" yuany3721 gpu gpu\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载硬盘")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /data/yuany3721/\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(":1000 /data/yuany3721\n$ lxc config device "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" yuany3721 data disk "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/yuany3721/ "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("path")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/\n$ lxc config device "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" yuany3721 sdata disk "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/share/ "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("path")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/sdata/\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器详情")]),s._v("\n$ lxc list\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("然后将查看到的容器IP（eth0）告知用户，用户即可使用"),n("code",[s._v("ssh ubuntu@container-IP")]),s._v("访问容器。")]),s._v(" "),n("p",[s._v("如果用户需要在容器中使用docker，需要额外修改容器配置如下：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ lxc config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" yuany3721 security.nesting "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n$ lxc config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" yuany3721 security.privileged "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n$ lxc restart yuany3721\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"删除容器"}},[n("strong",[s._v("删除容器")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ lxc stop delcontainer\n$ lxc delete delcontainer\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"用户指南"}},[s._v("用户指南")]),s._v(" "),n("h3",{attrs:{id:"联系管理员获取授权"}},[n("strong",[s._v("联系管理员获取授权")])]),s._v(" "),n("p",[s._v("您需要告知管理员的信息包括：您的用户名、您是否需要图形界面（推荐无图形界面，性能更好）、您是否希望使用docker")]),s._v(" "),n("p",[s._v("管理员会告知您一个IP，您可以通过该IP访问服务器，身份认证的账号为"),n("code",[s._v("ubuntu")]),s._v("，密码为"),n("code",[s._v("123456")]),s._v("。")]),s._v(" "),n("p",[n("strong",[s._v("注意：")]),s._v(" 访问服务器的账号与您的用户名"),n("strong",[s._v("无关")]),s._v(" ；您在获取授权后请尽快访问服务器并"),n("strong",[s._v("修改密码")])]),s._v(" "),n("p",[s._v("默认情况下，数据卷将被挂载于"),n("code",[s._v("/data")]),s._v("（用户目录）和"),n("code",[s._v("/sdata")]),s._v("（共享目录），共享目录的"),n("code",[s._v("/sdata/model")]),s._v("中有常用模型文件。")]),s._v(" "),n("h3",{attrs:{id:"从命令行访问服务器并修改密码"}},[n("strong",[s._v("从命令行访问服务器并修改密码")])]),s._v(" "),n("p",[s._v("Ubuntu在输入密码时不会显示输入内容，请不要惊慌，正常输入完毕回车即可。")]),s._v(" "),n("p",[s._v("以Windows系统为例，"),n("kbd",[s._v("Win+R")]),s._v("打开"),n("code",[s._v("cmd")]),s._v("，输入命令"),n("code",[s._v("ssh ubuntu@您的IP")]),s._v("，访问服务器。")]),s._v(" "),n("p",[s._v("提示以下信息时，输入yes回车，然后输入默认密码"),n("code",[s._v("123456")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("The authenticity of host '172.16.61.xx (172.16.61.xx)' can't be established.\nxxxx key fingerprint is SHA256:xxxxxxxxxxxxxxxxxxxxxxx/s.\nAre you sure you want to continue connecting (yes/no/[fingerprint])?\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("img",{attrs:{src:e(557),alt:"connect2lxc"}})]),s._v(" "),n("p",[s._v("在新出现的命令行中输入"),n("code",[s._v("passwd ubuntu")]),s._v("修改密码，修改成功后就可以使用新的密码登录服务器了。")]),s._v(" "),n("p",[n("img",{attrs:{src:e(558),alt:"passwd"}})]),s._v(" "),n("h3",{attrs:{id:"通过xrdp登录图形界面"}},[n("strong",[s._v("通过xrdp登录图形界面")])]),s._v(" "),n("p",[s._v("在Windows下，可以使用系统自带的RDP软件，"),n("kbd",[s._v("Win+R")]),s._v("打开"),n("code",[s._v("mstsc")]),s._v("，输入管理员给您的IP，点击连接（若出现提示称无法验证远程计算机身份，忽略提示并点击“是”继续连接）。")]),s._v(" "),n("p",[n("img",{attrs:{src:e(559),alt:"winRDP"}})]),s._v(" "),n("p",[s._v("连接后出现以下界面，在界面中输入账号"),n("code",[s._v("ubuntu")]),s._v("，密码为默认密码或您修改过的密码，点击“OK”，如果信息无误，则可以正常连接到服务器。")]),s._v(" "),n("p",[n("img",{attrs:{src:e(560),alt:"xrdp"}})]),s._v(" "),n("p",[s._v("如果您不是Windows机器，Linux可安装remmina访问，Mac可安装Microsoft Remote Desktop访问，操作类似，在此不再赘述。")]),s._v(" "),n("p",[s._v("该连接方式的优点是可以获得完整的Linux桌面体验，但当网络环境不佳时操作延时特别大、桌面长时间运行可能会卡死。")]),s._v(" "),n("h3",{attrs:{id:"文件传输"}},[n("strong",[s._v("文件传输")])]),s._v(" "),n("p",[s._v("系统配置了一个端口为22的sftp服务器，您可以使用Filezilla等ftp工具连接并使用ftp进行文件传输。")]),s._v(" "),n("p",[s._v("当然，您也可以通过远程桌面进行文件拖放，或者使用ssh进行文件传输，任何可以与Linux实体机器进行网络文件传输的工具都可以在该服务器上使用。")]),s._v(" "),n("h3",{attrs:{id:"其它服务器使用方式"}},[n("strong",[s._v("其它服务器使用方式")])]),s._v(" "),n("p",[s._v("这里列举几种推荐的使用方式，不同方式的使用场景各不相同，请您在了解各方式的优劣之后，结合自己的需求进行选择：")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("使用MobaXterm进行连接，该方法可以在没有桌面环境的情况下，转发单个应用的图形界面。例如您可以选择一个高性能的命令行界面，安装Pycharm之后在远程机器上使用图形化的Pycharm界面。")])]),s._v(" "),n("li",[n("p",[s._v("使用vscode的remote-ssh插件远程连接，该方法可以省去ftp服务器，直接打开远程服务器中的工程，并进行文件的上传下载和修改、程序的修改和运行。")])]),s._v(" "),n("li",[n("p",[s._v("直接使用powershell等工具ssh远程连接。")])])]),s._v(" "),n("h2",{attrs:{id:"参考资料"}},[s._v("参考资料")]),s._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://abcdabcd987.com/setup-shared-gpu-server-for-labs/",target:"_blank",rel:"noopener noreferrer"}},[s._v("为实验室建立公用GPU服务器"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/shenuiuin/LXD_GPU_SERVER",target:"_blank",rel:"noopener noreferrer"}},[s._v("实验室GPU服务器的LXD虚拟化"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://wiki.openvz.org/Main_Page",target:"_blank",rel:"noopener noreferrer"}},[s._v("OpenVZ"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://linuxcontainers.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("LXC"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://ubuntu.com/lxd",target:"_blank",rel:"noopener noreferrer"}},[s._v("LXD"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://docker.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("NVIDIA container toolkit install guide"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://discuss.linuxcontainers.org/t/ubuntu-22-04-lxd-networking-issue-not-getting-ips-and-solution-please-verify-correctness/14739",target:"_blank",rel:"noopener noreferrer"}},[s._v("LXD networking issue"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://askubuntu.com/questions/1406329/how-to-run-cgexec-without-sudo-as-current-user-on-ubuntu-22-04-with-cgroups-v2",target:"_blank",rel:"noopener noreferrer"}},[s._v("Change cgroup enabled"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://storware.eu/blog/xen-vs-kvm-comparison-of-hypervisors/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Xen vs. KVM – Comparison of Hypervisors"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://www.supermicro.com/en/solutions/management-software/bmc-resources",target:"_blank",rel:"noopener noreferrer"}},[s._v("Supermicro Intelligent Management"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://fabianlee.org/2022/09/20/kvm-creating-a-bridged-network-with-netplan-on-ubuntu-22-04/",target:"_blank",rel:"noopener noreferrer"}},[s._v("KVM: Creating a bridged network"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=a.exports}}]);