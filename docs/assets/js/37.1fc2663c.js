(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{606:function(e,t,n){"use strict";n.r(t);var r=n(17),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"前言"}},[e._v("前言")]),e._v(" "),n("p",[e._v("在"),n("RouterLink",{attrs:{to:"/blogs/note/docker/2024-07-01.html"}},[e._v("ZeroTier组网的简单应用")]),e._v("中，我们自建了Zerotier Moon，并使用Moon优化了连接延迟。")],1),e._v(" "),n("p",[e._v("但是在实际使用中，很多时候明明可以ping通Moon所在IP，但出现了断开连接的问题，猜测可能原因是与Planet服务器连接不稳定，导致根本走不到Moon这一步，因此考虑自建Planet和Controler。")]),e._v(" "),n("h2",{attrs:{id:"卸载zerotier-one环境"}},[e._v("卸载Zerotier One环境")]),e._v(" "),n("p",[e._v("由于"),n("a",{attrs:{href:"https://github.com/xubiaolin/docker-zerotier-planet",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-zerotier-planet"),n("OutboundLink")],1),e._v("使用容器化部署，为了避免端口冲突等问题，干脆把原来的Zerotier-One卸载掉：")]),e._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" dpkg -P zerotier-one\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" -rf /var/lib/zerotier-one/\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("h2",{attrs:{id:"配置docker环境"}},[e._v("配置docker环境")]),e._v(" "),n("p",[e._v("参考"),n("RouterLink",{attrs:{to:"/blogs/note/note/docker/2023-06-27.html"}},[e._v("ubuntu安装docker")])],1),e._v(" "),n("h2",{attrs:{id:"配置planet"}},[e._v("配置Planet")]),e._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 下载源码")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://ghproxy.imoyuapp.win/https://github.com/xubiaolin/docker-zerotier-planet.git\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 执行安装脚本")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" docker-zerotier-planet\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v("  ./deploy.sh\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[e._v("安装过程很安逸，按提示操作就完事了，安装结束后进入web页面新建网络、配置ip等操作与官方Zerotier Controller类似")]),e._v(" "),n("h2",{attrs:{id:"客户端配置"}},[e._v("客户端配置")]),e._v(" "),n("h3",{attrs:{id:"windows"}},[e._v("Windows")]),e._v(" "),n("p",[e._v("下载"),n("code",[e._v("planet")]),e._v("文件，覆盖到"),n("code",[e._v("C:\\ProgramData\\ZeroTier\\One")]),e._v("中")]),e._v(" "),n("p",[n("code",[e._v("Win+R")]),e._v(" "),n("code",[e._v("services.msc")]),e._v("找到Zerotier One，重启服务，然后就可以加入新建的网络了")]),e._v(" "),n("h3",{attrs:{id:"linux"}},[e._v("Linux")]),e._v(" "),n("p",[e._v("类似地，下载"),n("code",[e._v("planet")]),e._v("文件，覆盖到"),n("code",[e._v("/var/lib/zerotier-one")]),e._v("中，然后重启服务"),n("code",[e._v("sudo service zerotier-one restart")]),e._v("，重启好久可以加入网络了")])])}),[],!1,null,null,null);t.default=s.exports}}]);