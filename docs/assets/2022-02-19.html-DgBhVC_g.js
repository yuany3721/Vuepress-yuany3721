import{_ as i,c as a,a as n,o as l}from"./app-B5m6HLX-.js";const h={};function t(e,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gitlab/gitlab-ce</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--publish </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1118:80</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--publish </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1119:22</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--name </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">texlab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--restart </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">always</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-v </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/home/yuany3721/mnt/gitlab/config:/etc/gitlab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-v </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/home/yuany3721/mnt/gitlab/logs:/var/log/gitlab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-v </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/home/yuany3721/mnt/gitlab/data:/var/opt/gitlab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">--shm-size </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">256m</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">gitlab/gitlab-ce</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="修改配置文件" tabindex="-1"><a class="header-anchor" href="#修改配置文件"><span>修改配置文件</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /home/yuany3721/mnt/gitlab/config</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vi</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gitlab.rb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 找到external_url并修改为</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">external_url</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://texlab.yuany3721.top</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 找到gitlab_rails[&#39;gitlab_shell_ssh_port&#39;\\]并修改为</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;gitlab_shell_ssh_port&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1119</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>初始 root 的密码在<code>/home/yuany3721/mnt/gitlab/config/initial_root_password</code>里</p><h2 id="配置邮件" tabindex="-1"><a class="header-anchor" href="#配置邮件"><span>配置邮件</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 修改gitlab.rb</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;smtp_enable&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;smtp_address&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">smtp.qq.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;smtp_port&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 465</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;smtp_user_name&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">XXXX@qq.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;smtp_password&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123456</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # qq授权码</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;smtp_domain&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">smtp.qq.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;smtp_authentication&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">login</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;smtp_enable_starttls_auto&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;smtp_tls&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;gitlab_email_from&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">XXXX@qq.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    #和smtp_user_name一致，并且一定要有双引号</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gitlab_rails[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;gitlab_email_enabled&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7)]))}const p=i(h,[["render",t]]),d=JSON.parse('{"path":"/%E9%9A%8F%E8%AE%B0/Docker/2022-02-19.html","title":"docker安装gitlab","lang":"zh-CN","frontmatter":{"title":"docker安装gitlab","createTime":"2022/02/19","tags":["Docker"],"categories":["随记"]},"headers":[],"readingTime":{"minutes":0.49,"words":148},"git":{},"filePathRelative":"随记/Docker/2022-02-19.md","categoryList":[{"id":"0f870d","sort":10000,"name":"随记"},{"id":"472915","sort":10001,"name":"Docker"}]}');export{p as comp,d as data};
